# –ó–∞–¥–∞—á–∞ –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–π –∏–Ω—Å—Ç–∞–Ω—Ü–∏–∏ Claude

## –¢–µ–∫—É—â–∞—è –ø—Ä–æ–±–ª–µ–º–∞: Self-Healing –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–æ–ª–∂–Ω—ã–º –æ–±—Ä–∞–∑–æ–º

### –ß—Ç–æ —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ:
‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω State Tracking - –∫–ª–∏–µ–Ω—Ç –ª–æ–≥–∏—Ä—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è UI —Å–æ—Å—Ç–æ—è–Ω–∏—è
‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã coordinate-based clicks - —Ä–µ–∑–µ—Ä–≤–Ω—ã–π –º–µ—Ç–æ–¥ –∫–ª–∏–∫–æ–≤
‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –ø—Ä–æ–º–ø—Ç –¥–ª—è LLM –æ self-healing –ª–æ–≥–∏–∫–µ
‚úÖ –ò—Å—Ç–æ—Ä–∏—è –¥–µ–π—Å—Ç–≤–∏–π —Å–æ–¥–µ—Ä–∂–∏—Ç –º–∞—Ä–∫–µ—Ä—ã "UI State unchanged - action may have failed!"

### –ß—Ç–æ –ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç:
‚ùå LLM –≤–∏–¥–∏—Ç –º–∞—Ä–∫–µ—Ä—ã "UI State unchanged" –Ω–æ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –ø–æ–≤—Ç–æ—Ä—è—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –¥–µ–π—Å—Ç–≤–∏—è (–∫–ª–∏–∫–∏)
‚ùå 50 —à–∞–≥–æ–≤ –∏–∑ 50 - –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ –∫–ª–∏–∫–∏ –ø–æ —ç–ª–µ–º–µ–Ω—Ç–∞–º
‚ùå –ó–∞–¥–∞—á–∞ –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ - –∞–≥–µ–Ω—Ç –∑–∞—Å—Ç—Ä—è–ª –≤ —Ü–∏–∫–ª–µ

### –ö–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞:
**–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –¥–µ—Ç–µ–∫—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å–æ—Å—Ç–æ—è–Ω–∏—è:**
- –°–µ–π—á–∞—Å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è: `WindowTitle` –∏ `Elements.Count`
- –ü—Ä–æ–±–ª–µ–º–∞: –ü—Ä–∏ –∫–ª–∏–∫–∞—Ö –≤ Notepad —ç—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ù–ï –º–µ–Ω—è—é—Ç—Å—è
- –†–µ–∑—É–ª—å—Ç–∞—Ç: –°–∏—Å—Ç–µ–º–∞ —Å—á–∏—Ç–∞–µ—Ç —á—Ç–æ –∫–ª–∏–∫ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª, —Ö–æ—Ç—è —Ñ–æ–∫—É—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- LLM –ø–æ–ª—É—á–∞–µ—Ç "unchanged" –∏ –ø—ã—Ç–∞–µ—Ç—Å—è —Å–Ω–æ–≤–∞, –Ω–æ –ø—Ä–æ–º–ø—Ç –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ç—Ä–æ–≥–∏–π

### –§–∞–π–ª –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã:
–ü–æ—Å–ª–µ–¥–Ω–∏–π —Ç–µ—Å—Ç–æ–≤—ã–π –ª–æ–≥: `C:\Users\xelth\AppData\Local\Temp\claude\C--Users-xelth-xelthAGI\tasks\b9fb325.output`
- 50 —à–∞–≥–æ–≤, –≤—Å–µ —Å –º–∞—Ä–∫–µ—Ä–æ–º "UI State unchanged"
- –ê–≥–µ–Ω—Ç –∫–ª–∏–∫–∞–µ—Ç –ø–æ —ç–ª–µ–º–µ–Ω—Ç–∞–º, –Ω–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è (–ø–æ –º–µ—Ç—Ä–∏–∫–µ Title+Count)

---

## –ó–∞–¥–∞—á–∏ –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:

### 1. –£–ª—É—á—à–∏—Ç—å –¥–µ—Ç–µ–∫—Ü–∏—é –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å–æ—Å—Ç–æ—è–Ω–∏—è (–ö–†–ò–¢–ò–ß–ù–û)

**–§–∞–π–ª:** `client/SupportAgent/Program.cs`

**–ü—Ä–æ–±–ª–µ–º–∞:** –°–µ–π—á–∞—Å —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ Title –∏ Elements.Count
```csharp
// –ü–õ–û–•–û - –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
var stateChanged = (newTitle != previousTitle) || (newCount != previousElementCount);
```

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É Value —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
```csharp
// –ü–µ—Ä–µ–¥ –∫–æ–º–∞–Ω–¥–æ–π:
var textElements = uiState.Elements.Where(e => e.Type.Contains("Text") || e.Type.Contains("Edit"));
var previousValues = textElements.Select(e => e.Value).ToList();
var previousValuesHash = string.Join("|", previousValues);

// –ü–æ—Å–ª–µ –∫–æ–º–∞–Ω–¥—ã:
var newValues = newState.Elements.Where(e => e.Type.Contains("Text") || e.Type.Contains("Edit"));
var newValuesHash = string.Join("|", newValues.Select(e => e.Value));

var contentChanged = previousValuesHash != newValuesHash;
```

**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:**
- –î–æ–±–∞–≤–∏—Ç—å –≤ –∏—Å—Ç–æ—Ä–∏—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞: `[Content: "old" -> "new"]`
- –≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç LLM –≤–∏–¥–µ—Ç—å —á—Ç–æ —Ç–µ–∫—Å—Ç –∏–∑–º–µ–Ω–∏–ª—Å—è –¥–∞–∂–µ –µ—Å–ª–∏ Title –Ω–µ –ø–æ–º–µ–Ω—è–ª—Å—è

### 2. –£–∂–µ—Å—Ç–æ—á–∏—Ç—å –ø—Ä–æ–º–ø—Ç Self-Healing (–ö–†–ò–¢–ò–ß–ù–û)

**–§–∞–π–ª:** `server/src/llmService.js`

**–¢–µ–∫—É—â–∞—è –ø—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–æ–º–ø—Ç —Å–ª–∏—à–∫–æ–º –º—è–≥–∫–∏–π, LLM –µ–≥–æ –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –ñ–ï–°–¢–ö–ò–ï –ø—Ä–∞–≤–∏–ª–∞ —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏:

```markdown
**CRITICAL SELF-HEALING RULE:**
1. Look at last 3 actions in history
2. If you see "UI State unchanged" 3+ times in a row for SAME action type (e.g., all "click"):
   ‚Üí STOP clicking immediately
   ‚Üí This means clicks are NOT working
   ‚Üí Switch to alternative: use keyboard commands, request screenshot, or try different approach

**FORBIDDEN:**
- Repeating same action >3 times when seeing "unchanged"
- Clicking different element IDs when all show "unchanged" (Notepad generates new IDs)

**EXAMPLE:**
History shows:
- click element A [unchanged]
- click element B [unchanged]
- click element C [unchanged]

‚Üí STOP clicking! Elements are not the problem.
‚Üí Try: Ctrl+A + Delete to clear, or request screenshot
```

### 3. –î–æ–±–∞–≤–∏—Ç—å —Å—á–µ—Ç—á–∏–∫ –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è –¥–µ–π—Å—Ç–≤–∏–π

**–§–∞–π–ª:** `server/src/llmService.js` –º–µ—Ç–æ–¥ `_buildPrompt`

**–õ–æ–≥–∏–∫–∞:**
```javascript
// –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é
const lastActions = history.slice(-5).map(h => {
    const actionMatch = h.match(/^(\w+)\s/);
    return actionMatch ? actionMatch[1] : '';
});

const sameActionCount = lastActions.filter(a => a === lastActions[lastActions.length-1]).length;

if (sameActionCount >= 3) {
    prompt += `\n\n**WARNING: Same action repeated ${sameActionCount} times! CHANGE STRATEGY NOW!**`;
}
```

### 4. –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ: Timeout –Ω–∞ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –¥–µ–π—Å—Ç–≤–∏—è

**–§–∞–π–ª:** `client/SupportAgent/Program.cs`

**–ò–¥–µ—è:** –ù–∞ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π —Å—Ç–æ—Ä–æ–Ω–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ N –¥–µ–π—Å—Ç–≤–∏–π. –ï—Å–ª–∏ –æ–¥–Ω–æ –∏ —Ç–æ –∂–µ –¥–µ–π—Å—Ç–≤–∏–µ 5+ —Ä–∞–∑ –ø–æ–¥—Ä—è–¥ - –ü–†–ï–†–í–ê–¢–¨ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å –æ—à–∏–±–∫–æ–π.

---

## –î–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–µ—Ä—É

### SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

**–§–∞–π–ª —Å –¥–∞–Ω–Ω—ã–º–∏ –¥–æ—Å—Ç—É–ø–∞:** `../.claude/NOTES.md`

**–°–µ—Ä–≤–µ—Ä:**
- Hostname: 152.53.15.15 (antigravity)
- User: root
- SSH Alias: `antigravity`
- SSH Key: ~/.ssh/netcup
- –ö–æ–º–∞–Ω–¥–∞: `ssh antigravity`

**–ü—É—Ç—å –∫ –ø—Ä–æ–µ–∫—Ç—É –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:**
- `/var/www/xelthAGI/`
- –°–µ—Ä–≤–µ—Ä: Node.js Express –Ω–∞ –ø–æ—Ä—Ç—É 3232
- PM2 –ø—Ä–æ—Ü–µ—Å—Å: `xelthAGI`
- URL: https://xelth.com/AGI

### –ü—Ä–æ—Ü–µ—Å—Å –¥–µ–ø–ª–æ—è

1. **–°–±–æ—Ä–∫–∞ –∫–ª–∏–µ–Ω—Ç–∞:**
```bash
cd /c/Users/xelth/xelthAGI/client/SupportAgent
dotnet build -c Release
```

2. **–ö–æ–º–º–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π:**
```bash
cd /c/Users/xelth/xelthAGI
git add -A
git commit -m "fix: improve self-healing state detection"
git push
```

3. **–î–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä:**
```bash
ssh antigravity "cd /var/www/xelthAGI && git pull && pm2 restart xelthAGI"
```

4. **–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
# Health check
curl https://xelth.com/AGI/HEALTH

# –õ–æ–≥–∏
ssh antigravity "pm2 logs xelthAGI --lines 50"
```

---

## –§–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è

### –ö–ª–∏–µ–Ω—Ç (C#):
1. `client/SupportAgent/Program.cs`
   - –£–ª—É—á—à–∏—Ç—å –¥–µ—Ç–µ–∫—Ü–∏—é –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å–æ—Å—Ç–æ—è–Ω–∏—è (–¥–æ–±–∞–≤–∏—Ç—å Value tracking)
   - –î–æ–±–∞–≤–∏—Ç—å –≤ –∏—Å—Ç–æ—Ä–∏—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

### –°–µ—Ä–≤–µ—Ä (Node.js):
1. `server/src/llmService.js`
   - –£–∂–µ—Å—Ç–æ—á–∏—Ç—å –ø—Ä–æ–º–ø—Ç self-healing (–¥–æ–±–∞–≤–∏—Ç—å FORBIDDEN rules)
   - –î–æ–±–∞–≤–∏—Ç—å —Å—á–µ—Ç—á–∏–∫ –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è –¥–µ–π—Å—Ç–≤–∏–π
   - –î–æ–±–∞–≤–∏—Ç—å WARNING –≤ –ø—Ä–æ–º–ø—Ç –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ —Ü–∏–∫–ª–∞

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç:
```bash
cd /c/Users/xelth/xelthAGI/client/SupportAgent/bin/Release/net8.0-windows/win-x64
./SupportAgent.exe --app notepad --task "Clear all text and write: Self-healing v2 works!" --server https://xelth.com/AGI
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ê–≥–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω —É–≤–∏–¥–µ—Ç—å —á—Ç–æ –∫–ª–∏–∫–∏ –Ω–µ –º–µ–Ω—è—é—Ç –∫–æ–Ω—Ç–µ–Ω—Ç
- ‚úÖ –ü–æ—Å–ª–µ 2-3 –Ω–µ—É–¥–∞—á–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫ —Å–º–µ–Ω–∏—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—é (Ctrl+A + Delete)
- ‚úÖ –ó–∞–ø–∏—Å–∞—Ç—å —Ç–µ–∫—Å—Ç
- ‚úÖ –ó–∞–≤–µ—Ä—à–∏—Ç—å –∑–∞–¥–∞—á—É –≤ <20 —à–∞–≥–æ–≤

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞:**
- –ù–µ—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã—Ö —Ü–∏–∫–ª–æ–≤ –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π
- –ò—Å—Ç–æ—Ä–∏—è –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞: `[Content: "old" -> "new"]`
- –ó–∞–¥–∞—á–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ

---

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏

**–ò—Å—Ç–æ—Ä–∏—è —Å–µ—Å—Å–∏–∏:**
- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã: Playbooks, On-Demand Vision, Window Focus Verification, Slow Character Typing
- –ü–æ—Å–ª–µ–¥–Ω–∏–π —É—Å–ø–µ—à–Ω—ã–π —Ç–µ—Å—Ç: 12 —à–∞–≥–æ–≤, —Ç–µ–∫—Å—Ç –≤–≤–µ–¥–µ–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é
- –¢–µ–∫—É—â–∞—è –ø—Ä–æ–±–ª–µ–º–∞: Self-healing –¥–µ—Ç–µ–∫—Ç–∏—Ä—É–µ—Ç –Ω–æ –Ω–µ —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ "unchanged"

**Git commits:**
- `14a13b6` - slow character typing
- `f755e5d` - content verification and keyboard commands
- `9d41480` - window focus verification
- `4d1613d` - playbooks + on-demand vision + file downloads

**–ê–≥–µ–Ω—Ç –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–±–æ—Ç–∞–ª –Ω–∞–¥ self-healing:**
- ID: `a750469`
- –°—Ç–∞—Ç—É—Å: –†–µ–∞–ª–∏–∑–æ–≤–∞–ª coordinate clicks –∏ state tracking, –Ω–æ –ø—Ä–æ–±–ª–µ–º–∞ —Å —Ü–∏–∫–ª–∞–º–∏ –æ—Å—Ç–∞–ª–∞—Å—å

---

## –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞

```bash
# 1. –ü—Ä–æ—á–∏—Ç–∞—Ç—å —Ç–µ–∫—É—â–∏–µ —Ñ–∞–π–ª—ã
cat client/SupportAgent/Program.cs | grep -A 20 "previousTitle"
cat server/src/llmService.js | grep -A 30 "SELF-HEALING"

# 2. –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ç–µ—Å—Ç–æ–≤—ã–π –ª–æ–≥
tail -100 /c/Users/xelth/AppData/Local/Temp/claude/C--Users-xelth-xelthAGI/tasks/b9fb325.output

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞
ssh antigravity "pm2 status xelthAGI && git -C /var/www/xelthAGI log -1 --oneline"
```

---

–£–¥–∞—á–∏! üöÄ
